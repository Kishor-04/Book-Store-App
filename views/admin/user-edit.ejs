<%- include('../partials/head') %>
<body class="bg-gray-50">
  <%- include('../partials/admin-navbar') %>

  <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <%- include('../partials/messages') %>

    <div class="mb-6">
      <a href="<%= adminPath %>/users" class="text-blue-600 hover:text-blue-800">
        <i class="fas fa-arrow-left mr-2"></i> Back to Users
      </a>
    </div>

    <div class="bg-white rounded-lg shadow-md p-8">
      <h1 class="text-3xl font-bold text-gray-800 mb-6">
        <i class="fas fa-user-edit mr-2"></i> Edit User
      </h1>

      <form action="<%= adminPath %>/users/<%= editUser._id %>/update" method="POST" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Name *</label>
            <input 
              type="text" 
              name="name" 
              value="<%= editUser.name %>" 
              required 
              class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" 
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
            <input 
              type="email" 
              name="email" 
              value="<%= editUser.email %>" 
              required 
              class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" 
            />
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Role *</label>
            <select name="role" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
              <option value="user" <%= editUser.role === 'user' ? 'selected' : '' %>>User</option>
              <option value="admin" <%= editUser.role === 'admin' ? 'selected' : '' %>>Admin</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Status *</label>
            <select name="isActive" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
              <option value="true" <%= editUser.isActive ? 'selected' : '' %>>Active</option>
              <option value="false" <%= !editUser.isActive ? 'selected' : '' %>>Inactive</option>
            </select>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">New Password (leave empty to keep current)</label>
          <input 
            type="password" 
            name="password" 
            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500" 
            placeholder="Leave empty to keep current password"
          />
          <p class="text-xs text-gray-500 mt-1">Only fill this field if you want to change the password</p>
        </div>

        <div class="flex gap-4 pt-4">
          <a href="<%= adminPath %>/users" class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition">
            Cancel
          </a>
          <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
            <i class="fas fa-save mr-2"></i> Update User
          </button>
        </div>
      </form>
    </div>
  </main>

  <script src="/js/main.js"></script>
</body>
</html>
